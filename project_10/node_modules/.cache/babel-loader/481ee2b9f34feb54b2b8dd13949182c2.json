{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\minka\\\\OneDrive\\\\Desktop\\\\dev\\\\around-react\\\\project_10\\\\src\\\\components\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [addPlacebuttonText, setAddPlaceButtonText] = React.useState('Create');\n  const [editProfileButtonText, setEditProfileButtonText] = React.useState('Save');\n  const [editAvatarButtonText, setEditAvatarButtonText] = React.useState('Save');\n\n  const handleCardClick = card => setSelectedCard(card);\n\n  const handleEditAvatarClick = () => setIsEditAvatarPopupOpen(true);\n\n  const handleEditProfileClick = () => setIsEditProfilePopupOpen(true);\n\n  const handleAddNewCardClick = () => setIsAddPlacePopupOpen(true);\n\n  const handlePopupClick = event => {\n    event.target.classList.contains('popup_opened') && closeAllPopups();\n  };\n\n  const handleUpdateAvatar = url => {\n    setEditAvatarButtonText('Updating...');\n    api.updateUserImage(url).then(user => {\n      setCurrentUser(user);\n      closeAllPopups();\n    }).catch(err => console.log(err)).finally(() => setEditAvatarButtonText('Save'));\n  };\n\n  const handleUpdateUser = _ref => {\n    let {\n      name,\n      about\n    } = _ref;\n    setEditProfileButtonText('Updating...');\n    api.updateUserInfo({\n      name,\n      about\n    }).then(user => {\n      setCurrentUser(user);\n      closeAllPopups();\n    }).catch(err => console.log(err)).finally(() => setEditProfileButtonText('Save'));\n  };\n\n  const handleAddPlaceSubmit = _ref2 => {\n    let {\n      name,\n      link\n    } = _ref2;\n    setAddPlaceButtonText('Saving...');\n    api.submitNewCard({\n      name,\n      link\n    }).then(card => {\n      setCards([card, ...cards]);\n      closeAllPopups();\n    }).catch(err => console.log(err)).finally(() => setAddPlaceButtonText('Create'));\n  };\n\n  const handleCardLike = (card, isLiked) => {\n    api.handleLikeCardStatus(card._id, isLiked).then(newCard => {\n      setCards(state => state.map(currentCard => currentCard._id === card._id ? newCard : currentCard));\n    }).catch(err => console.log(err));\n  };\n\n  const handleCardDeleteClick = _ref3 => {\n    let {\n      _id: id\n    } = _ref3;\n    api.deleteCard(id).then(() => {\n      const filteredCards = cards.filter(card => card._id !== id);\n      setCards(filteredCards);\n    }).catch(err => console.log(err));\n  };\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard(null);\n  };\n\n  useEffect(() => {\n    api.init().then(_ref4 => {\n      let [cards, user] = _ref4;\n      setCurrentUser(user);\n      setCards(cards);\n    }).catch(err => console.log(err));\n\n    const closeByEscape = e => {\n      if (e.key === 'Escape') {\n        closeAllPopups();\n      }\n    };\n\n    document.addEventListener('keydown', closeByEscape);\n    return () => document.removeEventListener('keydown', closeByEscape);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page\",\n      children: [/*#__PURE__*/_jsxDEV(EditProfilePopup, {\n        onPopupClick: handlePopupClick,\n        buttonText: editProfileButtonText,\n        onUpdateUser: handleUpdateUser,\n        isOpen: isEditProfilePopupOpen,\n        onClose: closeAllPopups\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AddPlacePopup, {\n        onPopupClick: handlePopupClick,\n        buttonText: addPlacebuttonText,\n        onAddPlaceSubmit: handleAddPlaceSubmit,\n        isOpen: isAddPlacePopupOpen,\n        onClose: closeAllPopups\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EditAvatarPopup, {\n        onPopupClick: handlePopupClick,\n        buttonText: editAvatarButtonText,\n        onUpdateAvatar: handleUpdateAvatar,\n        isOpen: isEditAvatarPopupOpen,\n        onClose: closeAllPopups\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PopupWithForm, {\n        name: \"delete-confirm\",\n        title: \"Are you sure?\",\n        onClose: closeAllPopups,\n        buttonText: \"Yes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n        card: selectedCard,\n        onClose: closeAllPopups,\n        onPopupClick: handlePopupClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Main, {\n        onEditProfileClick: handleEditProfileClick,\n        onAddPlaceClick: handleAddNewCardClick,\n        onEditAvatarClick: handleEditAvatarClick,\n        onCardClick: handleCardClick,\n        cards: cards,\n        onCardLike: handleCardLike,\n        onCardDelete: handleCardDeleteClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"IGXjK+aIV3j8ADTUmCzoSYTOuKo=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/minka/OneDrive/Desktop/dev/around-react/project_10/src/components/App.js"],"names":["React","useEffect","Header","Main","Footer","PopupWithForm","ImagePopup","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","useState","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","addPlacebuttonText","setAddPlaceButtonText","editProfileButtonText","setEditProfileButtonText","editAvatarButtonText","setEditAvatarButtonText","handleCardClick","card","handleEditAvatarClick","handleEditProfileClick","handleAddNewCardClick","handlePopupClick","event","target","classList","contains","closeAllPopups","handleUpdateAvatar","url","updateUserImage","then","user","catch","err","console","log","finally","handleUpdateUser","name","about","updateUserInfo","handleAddPlaceSubmit","link","submitNewCard","handleCardLike","isLiked","handleLikeCardStatus","_id","newCard","state","map","currentCard","handleCardDeleteClick","id","deleteCard","filteredCards","filter","init","closeByEscape","e","key","document","addEventListener","removeEventListener"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport ImagePopup from './ImagePopup';\r\nimport api from '../utils/api';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState(null);\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [addPlacebuttonText, setAddPlaceButtonText] = React.useState('Create');\r\n  const [editProfileButtonText, setEditProfileButtonText] = React.useState('Save');\r\n  const [editAvatarButtonText, setEditAvatarButtonText] = React.useState('Save');\r\n\r\n  const handleCardClick = (card) => setSelectedCard(card);\r\n\r\n  const handleEditAvatarClick = () => setIsEditAvatarPopupOpen(true);\r\n\r\n  const handleEditProfileClick = () => setIsEditProfilePopupOpen(true);\r\n\r\n  const handleAddNewCardClick = () => setIsAddPlacePopupOpen(true);\r\n\r\n  const handlePopupClick = (event) => {\r\n    event.target.classList.contains('popup_opened') && closeAllPopups();\r\n  }\r\n\r\n  const handleUpdateAvatar = (url) => {\r\n    setEditAvatarButtonText('Updating...');\r\n    api\r\n      .updateUserImage(url)\r\n      .then((user) => {\r\n        setCurrentUser(user);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => setEditAvatarButtonText('Save'));\r\n  };\r\n\r\n  const handleUpdateUser = ({ name, about }) => {\r\n    setEditProfileButtonText('Updating...');\r\n    api\r\n      .updateUserInfo({ name, about })\r\n      .then((user) => {\r\n        setCurrentUser(user);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => setEditProfileButtonText('Save'));\r\n  };\r\n\r\n  const handleAddPlaceSubmit = ({ name, link }) => {\r\n    setAddPlaceButtonText('Saving...');\r\n    api\r\n      .submitNewCard({ name, link })\r\n      .then((card) => {\r\n        setCards([card, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => setAddPlaceButtonText('Create'));\r\n  };\r\n\r\n  const handleCardLike = (card, isLiked) => {\r\n    api\r\n      .handleLikeCardStatus(card._id, isLiked)\r\n      .then((newCard) => {\r\n        setCards((state) => state.map((currentCard) => (currentCard._id === card._id ? newCard : currentCard)));\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const handleCardDeleteClick = ({ _id: id }) => {\r\n    api\r\n      .deleteCard(id)\r\n      .then(() => {\r\n        const filteredCards = cards.filter((card) => card._id !== id);\r\n        setCards(filteredCards);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const closeAllPopups = () => {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setSelectedCard(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    api\r\n      .init()\r\n      .then(([cards, user]) => {\r\n        setCurrentUser(user);\r\n        setCards(cards);\r\n      })\r\n      .catch((err) => console.log(err));\r\n\r\n    const closeByEscape = (e) => {\r\n      if (e.key === 'Escape') {\r\n        closeAllPopups();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', closeByEscape);\r\n    return () => document.removeEventListener('keydown', closeByEscape);\r\n  }, []);\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <EditProfilePopup\r\n          onPopupClick={handlePopupClick}\r\n          buttonText={editProfileButtonText}\r\n          onUpdateUser={handleUpdateUser}\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n        />\r\n        <AddPlacePopup\r\n          onPopupClick={handlePopupClick}\r\n          buttonText={addPlacebuttonText}\r\n          onAddPlaceSubmit={handleAddPlaceSubmit}\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n        />\r\n        <EditAvatarPopup\r\n          onPopupClick={handlePopupClick}\r\n          buttonText={editAvatarButtonText}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n        />\r\n        <PopupWithForm name=\"delete-confirm\" title=\"Are you sure?\" onClose={closeAllPopups} buttonText=\"Yes\" />\r\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} onPopupClick={handlePopupClick} />\r\n        <Header />\r\n        <Main\r\n          onEditProfileClick={handleEditProfileClick}\r\n          onAddPlaceClick={handleAddNewCardClick}\r\n          onEditAvatarClick={handleEditAvatarClick}\r\n          onCardClick={handleCardClick}\r\n          cards={cards}\r\n          onCardLike={handleCardLike}\r\n          onCardDelete={handleCardDeleteClick}\r\n        />\r\n        <Footer />\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}