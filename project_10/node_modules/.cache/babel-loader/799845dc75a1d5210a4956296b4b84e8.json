{"ast":null,"code":"class Api {\n  constructor(auth, rootUrl) {\n    this._fetch = _ref => {\n      let {\n        url,\n        method,\n        data\n      } = _ref;\n      return fetch(`${this._rootUrl}${url}`, {\n        method,\n        headers: {\n          authorization: this._authToken,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(this._handleResponse);\n    };\n\n    this._handleResponse = res => res.ok ? res.json() : Promise.reject(`Error: ${res.status}`);\n\n    this._handleError = err => Promise.reject(err);\n\n    this.init = () => Promise.all([this._getInitialCards(), this._getUserInfo()]);\n\n    this._getInitialCards = () => this._fetch({\n      url: 'cards'\n    });\n\n    this._getUserInfo = () => this._fetch({\n      url: 'users/me'\n    });\n\n    this.updateUserInfo = _ref2 => {\n      let {\n        name,\n        about\n      } = _ref2;\n      return this._fetch({\n        url: 'users/me',\n        method: 'PATCH',\n        data: {\n          name,\n          about\n        }\n      });\n    };\n\n    this.updateUserImage = avatar => this._fetch({\n      url: 'users/me/avatar',\n      method: 'PATCH',\n      data: {\n        avatar\n      }\n    });\n\n    this.submitNewCard = _ref3 => {\n      let {\n        name,\n        link\n      } = _ref3;\n      return this._fetch({\n        url: 'cards',\n        method: 'POST',\n        data: {\n          name,\n          link\n        }\n      });\n    };\n\n    this.deleteCard = cardId => this._fetch({\n      url: `cards/${cardId}`,\n      method: 'DELETE'\n    });\n\n    this.handleLikeCardStatus = (cardId, isLiked) => {\n      return this._fetch({\n        url: `cards/likes/${cardId}`,\n        method: isLiked ? 'DELETE' : 'PUT'\n      });\n    };\n\n    this._authToken = auth;\n    this._rootUrl = rootUrl;\n  }\n\n}\n\nconst api = new Api('614bb6fa-36a6-4d24-9b95-72bf17bccf61', 'https://around.nomoreparties.co/v1/group-12/');\nexport default api;","map":{"version":3,"sources":["C:/Users/minka/OneDrive/Desktop/dev/around-react/project_10/src/utils/api.js"],"names":["Api","constructor","auth","rootUrl","_fetch","url","method","data","fetch","_rootUrl","headers","authorization","_authToken","body","JSON","stringify","then","_handleResponse","res","ok","json","Promise","reject","status","_handleError","err","init","all","_getInitialCards","_getUserInfo","updateUserInfo","name","about","updateUserImage","avatar","submitNewCard","link","deleteCard","cardId","handleLikeCardStatus","isLiked","api"],"mappings":"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","sourcesContent":["class Api {\n  constructor(auth, rootUrl) {\n    this._authToken = auth;\n    this._rootUrl = rootUrl;\n  }\n\n  _fetch = ({ url, method, data }) =>\n    fetch(`${this._rootUrl}${url}`, {\n      method,\n      headers: {\n        authorization: this._authToken,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    }).then(this._handleResponse);\n\n  _handleResponse = (res) => (res.ok ? res.json() : Promise.reject(`Error: ${res.status}`));\n\n  _handleError = (err) => Promise.reject(err);\n\n  init = () => Promise.all([this._getInitialCards(), this._getUserInfo()]);\n\n  _getInitialCards = () => this._fetch({ url: 'cards' });\n\n  _getUserInfo = () => this._fetch({ url: 'users/me' });\n\n  updateUserInfo = ({ name, about }) => this._fetch({ url: 'users/me', method: 'PATCH', data: { name, about } });\n\n  updateUserImage = (avatar) => this._fetch({ url: 'users/me/avatar', method: 'PATCH', data: { avatar } });\n\n  submitNewCard = ({ name, link }) => this._fetch({ url: 'cards', method: 'POST', data: { name, link } });\n\n  deleteCard = (cardId) => this._fetch({ url: `cards/${cardId}`, method: 'DELETE' });\n\n  handleLikeCardStatus = (cardId, isLiked) => {\n    return this._fetch({ url: `cards/likes/${cardId}`, method: isLiked ? 'DELETE' : 'PUT' });\n  };\n}\n\nconst api = new Api('614bb6fa-36a6-4d24-9b95-72bf17bccf61', 'https://around.nomoreparties.co/v1/group-12/');\nexport default api;\n"]},"metadata":{},"sourceType":"module"}